<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<style>.keyword { font-weight : bold ; color : Red }
.keywordsign { color : #C04600 }
.comment { color : Green }
.constructor { color : Blue }
.type { color : #5C6585 }
.string { color : Maroon }
.warning { color : Red ; font-weight : bold }
.info { margin-left : 3em; margin-right: 3em }
.param_info { margin-top: 4px; margin-left : 3em; margin-right : 3em }
.code { color : #465F91 ; background-color: #F5F5F5; }
pre { margin-bottom: 4px; font-family: monospace; background-color: #F5F5F5; }
pre.verbatim, pre.codepre { }</style>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Bucket Sort</title>
</head>
<body>
<p>
Bucket sort assumes input generated by a random process that distributes elements uniformly over the interval <i>[0, 1)</i>.
</p>
<p>
The idea of bucket sort is to divide <i>[0, 1)</i> into <i>n</i> equal-sized subintervals or <i>buckets</i>, and then distribute the <i>n</i> input numbers into the buckets. To produce the output, sort the numbers in each bucket and then go through the buckets in order. Sorting a bucket can be done with insertion sort.
<pre>
let rec insert x = function
  | [] -> [x]
  | h :: tl as ls ->
    if x < h then x :: ls else h :: insert x tl

let rec insertion_sort = function
  | [] | [_] as ls -> ls
  | h :: tl -> insert h (insertion_sort tl)
</pre>
</p>
<p>
<p>This code for bucket sort assumes the input is an <i>n</i>-element array <code>a</code> and that each element <i>0 &le; <code>a.(i)</code> &lt; 1</i>. The code requires an auxillary array <code>b</code>.(<i>0 .. n - 1</i>)</code> of lists (buckets).
</p>
<pre>
let bucket_sort a =
  let n = Array.length a in
  let b = Array.make n [] in
  Array.iter
    (fun x ->
       let i =
         int_of_float (
           floor (float_of_int n *. x)
         ) in
        Array.set b i (x :: Array.get b i)
      ) a;
  Array.iteri
    (fun i l ->
       Array.set b i (insertion_sort l)
    ) b;
  Array.fold_left (fun acc bucket -> acc @ bucket) [] b
;;
bucket_sort [| 0.78; 0.17; 0.39; 0.26; 0.72; 0.94
             ; 0.21; 0.12; 0.23; 0.68|]
</pre>
</p>
<p>
Bucket sort runs in linear time on the average.
</p>
<p>
<hr/>
<p>
References:<br/>
[1] "Introduction to Algorithms" Section 9.4:Bucket Sort -- Cormen et. al. (Second ed.) 2001.<br/>
</p>
</body>
</html>
