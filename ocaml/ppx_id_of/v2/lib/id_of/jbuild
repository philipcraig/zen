(jbuild_version 1)

(library
 ((name ppx_id_of)
  (synopsis "ppx with ocaml-migrate-parse-tree and jbuilder")
  (kind ppx_rewriter)

  ; `ocaml-migrate-parsetree` now has a driver
  ; `ocaml-migrate-parsetree.driver-main` and `jbuilder` uses it by
  ; default. If we were satisfied with that, we'd write here
  ; (libraries (ocaml-migrate-parsetree)) 

  ; I'm preferring to use the custom driver `ppx_driver.runner`
  ; instead since that arranges for the production of a cli that can
  ; be used with ocamlc for testing (see the instructions below).

  (libraries (ocaml-migrate-parsetree))
  ; (libraries (ppx_driver))
))

; Example testing with the stand-alone cli:
;   ocamlc -dsource -pp "~/project/solvuu/solvuu-root/_build/default/.ppx/solvuu-ppx.id-of+ppx_driver.runner/ppx.exe -as-pp" ~/test.ml
